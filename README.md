# 二次元卡片抽卡应用 - CardAddictionQuitter

这是一款结合屏幕时间管理和抽卡游戏机制的iOS应用，旨在帮助用户减少手机使用时间，培养健康的使用习惯。

## 功能特点

### 🎮 核心游戏机制
- **稀有度分级**：卡牌分为N(普通)、R(稀有)、SR(超稀有)、SSR(最稀有)四个等级
- **抽卡系统**：基于手机使用时间获取抽卡次数，3小时内5次，每增加1小时减少1次
- **概率机制**：基础概率SSR 1%、SR 9%、R 30%、N 60%
- **保底机制**：每10抽必出SR或更高，每100抽必出SSR
- **任务系统**：完成任务获得抽卡概率提升

### 📱 屏幕时间管理
- 使用Apple的ScreenTime API监控屏幕使用时间
- 根据使用时间智能计算可获得的抽卡次数
- 激励用户减少使用时间以获得更多抽卡机会

### 💾 数据持久化
- 使用Core Data存储卡片收集、任务完成记录等数据
- 支持iCloud同步(可选)
- 数据备份与恢复机制

### 🎯 任务系统
- 多样化任务类型，包括写戒色日记、记录善举、晨练、阅读等
- 任务难度分级，完成高难度任务获得更高概率提升
- 每日任务刷新机制，避免重复完成同一任务

## 技术架构

### 核心模块
1. **TimeTracker** - 屏幕时间监控模块
2. **TimeExchangeLogic** - 时间兑换抽卡次数逻辑
3. **GachaSystem** - 抽卡系统
4. **MissionSystem** - 任务系统

### 数据模型
- **Card** - 卡牌数据结构，包含角色、稀有度、属性等信息
- **MissionRecord** - 任务记录，追踪完成时间和奖励
- **DrawRecord** - 抽卡记录，统计抽卡历史

### 技术栈
- Swift 5.0+
- iOS 15.0+
- Core Data (数据持久化)
- ScreenTime API (屏幕时间监控)
- SwiftUI/UIKit (界面开发)

## 应用流程

1. **启动应用** - 初始化各模块并加载用户数据
2. **监控使用时间** - TimeTracker开始监控屏幕使用时间
3. **计算抽卡次数** - TimeExchangeLogic根据使用时间计算可抽卡次数
4. **执行抽卡** - 用户消耗抽卡次数进行抽卡
5. **任务系统** - 用户完成任务获得概率提升
6. **数据存储** - 所有操作记录保存到Core Data

## 开发说明

### 环境要求
- Xcode 14.0+
- iOS 15.0+设备或模拟器
- 需要ScreenTime权限

### 构建步骤
1. 克隆项目代码
2. 在Xcode中打开项目
3. 配置Core Data模型
4. 运行应用到模拟器或设备

### 注意事项
- 应用需要请求ScreenTime权限才能正常工作
- Core Data模型需要包含Card、MissionRecord和DrawRecord实体
- 首次运行时需要初始化数据结构

## 未来规划

### 功能扩展
- 添加卡牌收藏展示功能
- 实现卡牌合成/升级系统
- 增加社交分享功能
- 添加排行榜和成就系统

### 优化方向
- 提升抽卡动画效果
- 优化概率算法，增加更多策略性
- 增强用户界面交互体验
- 添加更多动漫IP和角色

## License

MIT License

## 关于项目

这款应用结合了游戏化机制和健康管理理念，通过有趣的抽卡玩法鼓励用户培养健康的手机使用习惯。如果你有任何建议或问题，欢迎提交Issue或Pull Request。